---
version: 1
interactions:
- request:
    body: <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>fr-par</LocationConstraint></CreateBucketConfiguration>
    form: {}
    headers:
      Content-Length:
      - "150"
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Content-Sha256:
      - 2cb57fad7b7168921a4c94426cfcb9ee2953f126430595df844e22d50f029060
      X-Amz-Date:
      - 20220616T132734Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      Location:
      - /test-acc-s3-bucket-policy-disappears
      X-Amz-Id-2:
      - tx530e6925f4c9453abf866-0062ab2fc6
      X-Amz-Request-Id:
      - tx530e6925f4c9453abf866-0062ab2fc6
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: <Tagging xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><TagSet><Tag><Key>TestName</Key><Value>TestAccS3BucketPolicy_basic</Value></Tag></TagSet></Tagging>
    form: {}
    headers:
      Content-Length:
      - "156"
      Content-Md5:
      - p3T082mvbf4ZH7752RiXGA==
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - 72c97836ea08e6b99fc391a5dd0c7cd7bb3652166848bca895d62539ebc2319f
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?tagging=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - tx8b0bbd439a3c44deadb0a-0062ab2fc7
      X-Amz-Request-Id:
      - tx8b0bbd439a3c44deadb0a-0062ab2fc7
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Content-Md5:
      - 1B2M2Y8AsgTpgAmY7PhCfg==
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?acl=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - tx5b8877f5faa64f9984990-0062ab2fc7
      X-Amz-Request-Id:
      - tx5b8877f5faa64f9984990-0062ab2fc7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: <Tagging xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><TagSet><Tag><Key>TestName</Key><Value>TestAccS3BucketPolicy_basic</Value></Tag></TagSet></Tagging>
    form: {}
    headers:
      Content-Length:
      - "156"
      Content-Md5:
      - p3T082mvbf4ZH7752RiXGA==
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - 72c97836ea08e6b99fc391a5dd0c7cd7bb3652166848bca895d62539ebc2319f
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?tagging=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - tx36f24474647044ac81ea5-0062ab2fc7
      X-Amz-Request-Id:
      - tx36f24474647044ac81ea5-0062ab2fc7
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <ListBucketResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Name>test-acc-s3-bucket-policy-disappears</Name><Prefix/><Delimiter/><MaxKeys>1000</MaxKeys><IsTruncated>false</IsTruncated><Marker/></ListBucketResult>
    headers:
      Content-Length:
      - "258"
      Content-Type:
      - application/xml
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - tx73fb884a55024c828c03e-0062ab2fc7
      X-Amz-Request-Id:
      - tx73fb884a55024c828c03e-0062ab2fc7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?tagging=
    method: GET
  response:
    body: <Tagging xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><TagSet><Tag><Key>TestName</Key><Value>TestAccS3BucketPolicy_basic</Value></Tag></TagSet></Tagging>
    headers:
      Content-Length:
      - "156"
      Content-Type:
      - application/xml
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - txc039dd230b324b1aa1def-0062ab2fc7
      X-Amz-Request-Id:
      - txc039dd230b324b1aa1def-0062ab2fc7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?cors=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchCORSConfiguration</Code><Message>The CORS configuration does not exist</Message><RequestId>txa89a213854c44babbe143-0062ab2fc7</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 16 Jun 2022 13:27:35 GMT
      X-Amz-Id-2:
      - txa89a213854c44babbe143-0062ab2fc7
      X-Amz-Request-Id:
      - txa89a213854c44babbe143-0062ab2fc7
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132735Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?versioning=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <VersioningConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"/>
    headers:
      Content-Length:
      - "113"
      Content-Type:
      - text/plain
      Date:
      - Thu, 16 Jun 2022 13:27:36 GMT
      X-Amz-Id-2:
      - tx67e5bf7634a4423c8eabd-0062ab2fc7
      X-Amz-Request-Id:
      - tx67e5bf7634a4423c8eabd-0062ab2fc7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132736Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?lifecycle=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchLifecycleConfiguration</Code><Message>The lifecycle configuration does not exist.</Message><RequestId>tx0fddba5bc95147fc93a62-0062ab2fc8</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 16 Jun 2022 13:27:36 GMT
      X-Amz-Id-2:
      - tx0fddba5bc95147fc93a62-0062ab2fc8
      X-Amz-Request-Id:
      - tx0fddba5bc95147fc93a62-0062ab2fc8
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: '{"Statement":[{"Action":"s3:*","Effect":"Allow","Principal":[{"Identifiers":"*","Type":"SCW"}],"Resource":["test-acc-s3-bucket-policy-disappears/*","test-acc-s3-bucket-policy-disappears"],"Sid":""}],"Version":"2012-10-17"}'
    form: {}
    headers:
      Content-Length:
      - "222"
      Content-Md5:
      - SoiQuGQ5q9YigIso/QJ/LA==
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - 3b4a9c87d8d552bc3fd25477572b50c329caf80cab6c505bdf6e525536bb1ba0
      X-Amz-Date:
      - 20220616T132736Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/?policy=
    method: PUT
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>MalformedJSON</Code><Message>The JSON you provided was not well-formed or did not validate against our published schema.</Message><RequestId>tx31309dd1c16346a0b9a79-0062ab2fc8</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 16 Jun 2022 13:27:36 GMT
      X-Amz-Id-2:
      - tx31309dd1c16346a0b9a79-0062ab2fc8
      X-Amz-Request-Id:
      - tx31309dd1c16346a0b9a79-0062ab2fc8
    status: 400 Bad Request
    code: 400
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.26 (go1.18.3; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20220616T132736Z
    url: https://test-acc-s3-bucket-policy-disappears.s3.fr-par.scw.cloud/
    method: DELETE
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 16 Jun 2022 13:27:36 GMT
      X-Amz-Id-2:
      - tx9dea10da9ea045e590c31-0062ab2fc8
      X-Amz-Request-Id:
      - tx9dea10da9ea045e590c31-0062ab2fc8
    status: 204 No Content
    code: 204
    duration: ""
