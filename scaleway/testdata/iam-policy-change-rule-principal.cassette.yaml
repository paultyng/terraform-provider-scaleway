---
version: 1
interactions:
- request:
    body: '{"name":"tf_tests_policy_changeruleprincipal","description":"a description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","rules":[{"permission_set_names":["AllProductsFullAccess"],"project_ids":null,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"no_principal":true}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:43 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 2d8cfc26-05f1-4dce-9d28-6da31c3facd1
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:44 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 92e2f401-d21f-459e-8f28-b1d9ca0fd197
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"rules":[{"id":"2928ecbb-c7ec-4b8a-965c-db8e7bf2ace4","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:44 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ceaa7156-2d68-4e23-a84d-58c859990581
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:45 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 382959c4-2de0-457d-a1d5-d7ed807dd04e
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:45 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 3c3c39b6-316a-4235-b854-0475b6bc79de
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"rules":[{"id":"2928ecbb-c7ec-4b8a-965c-db8e7bf2ace4","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - c7407879-6831-48e2-a9aa-1c5ba8de737c
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 5615d5d1-ef1a-4c96-be77-f6661022ea27
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"rules":[{"id":"2928ecbb-c7ec-4b8a-965c-db8e7bf2ace4","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 8c3b5dbb-29db-4b45-aeba-4d62d469d2df
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"policy_id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","rules":[{"permission_set_names":["AllProductsFullAccess"],"project_ids":["105bdce1-64c0-48ab-899d-868455867ecf"]}]}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules
    method: PUT
  response:
    body: '{"rules":[{"id":"c006f8c7-9c70-4373-80d5-d208a1f4c9a7","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"projects","project_ids":["105bdce1-64c0-48ab-899d-868455867ecf"]}]}'
    headers:
      Content-Length:
      - "201"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4649345a-f688-42b4-b06b-e0533e4e09dc
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ad2b98c4-7407-48e1-974b-0d5aff55e597
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"rules":[{"id":"c006f8c7-9c70-4373-80d5-d208a1f4c9a7","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"projects","project_ids":["105bdce1-64c0-48ab-899d-868455867ecf"]}],"total_count":1}'
    headers:
      Content-Length:
      - "217"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a1de1da7-6167-426c-8c37-d79b3783219e
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 03fbbb16-dba9-4205-b9b5-18c7576231a1
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","name":"tf_tests_policy_changeruleprincipal","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.555725Z","updated_at":"2022-07-08T12:30:43.555725Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "349"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - c70225b2-609d-4645-95ce-8e2400e4eb13
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"rules":[{"id":"c006f8c7-9c70-4373-80d5-d208a1f4c9a7","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"projects","project_ids":["105bdce1-64c0-48ab-899d-868455867ecf"]}],"total_count":1}'
    headers:
      Content-Length:
      - "217"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 70da45ee-9bce-449b-8daa-80260b7d04f3
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4517089f-71ff-4613-9ebc-7909ed58e172
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/eb401391-f66b-4ed5-b7c9-573f551d1e00
    method: GET
  response:
    body: '{"message":"resource is not found","resource":"policy","resource_id":"eb401391-f66b-4ed5-b7c9-573f551d1e00","type":"not_found"}'
    headers:
      Content-Length:
      - "127"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 13a1ec57-8e91-4ebc-be89-e41082a8a8a2
    status: 404 Not Found
    code: 404
    duration: ""
