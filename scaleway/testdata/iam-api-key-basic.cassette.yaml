---
version: 1
interactions:
- request:
    body: '{"name":"tf_tests_app_basic","organization_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/applications
    method: POST
  response:
    body: '{"id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819","name":"tf_tests_app_basic","description":"","created_at":"2022-06-27T15:39:29.118636Z","updated_at":"2022-06-27T15:39:29.118636Z","organization_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"nb_api_keys":0}'
    headers:
      Content-Length:
      - "265"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a8e09ec7-e508-494e-94a9-a32d8894dfdd
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/applications/17b53ffe-b7cc-4d87-ae6f-d7a68f71e819
    method: GET
  response:
    body: '{"id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819","name":"tf_tests_app_basic","description":"","created_at":"2022-06-27T15:39:29.118636Z","updated_at":"2022-06-27T15:39:29.118636Z","organization_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"nb_api_keys":0}'
    headers:
      Content-Length:
      - "265"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 768e6b46-6593-4a41-ae2c-603419f08851
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819","expires_at":null,"default_project_id":null,"description":"a
      description"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys
    method: POST
  response:
    body: '{"access_key":"SCWYH33MVHYQYSSSFTNB","secret_key":"8b45a26d-7062-4bdb-af03-638a2bbc686b","description":"a
      description","created_at":"2022-06-27T15:39:29.306136Z","updated_at":"2022-06-27T15:39:29.306136Z","expired_at":null,"default_project_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"creation_ip":"","application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819"}'
    headers:
      Content-Length:
      - "372"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - bcd64a52-3bf8-4213-846b-4146a378932e
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: GET
  response:
    body: '{"access_key":"SCWYH33MVHYQYSSSFTNB","secret_key":null,"description":"a
      description","created_at":"2022-06-27T15:39:29.306136Z","updated_at":"2022-06-27T15:39:29.306136Z","expired_at":null,"default_project_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"creation_ip":"","application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819"}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 756f4ebc-63ea-41ad-a789-0033e8ac956c
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: GET
  response:
    body: '{"access_key":"SCWYH33MVHYQYSSSFTNB","secret_key":null,"description":"a
      description","created_at":"2022-06-27T15:39:29.306136Z","updated_at":"2022-06-27T15:39:29.306136Z","expired_at":null,"default_project_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"creation_ip":"","application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819"}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 42300364-c546-4d52-839f-3fdcd5c1928a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/applications/17b53ffe-b7cc-4d87-ae6f-d7a68f71e819
    method: GET
  response:
    body: '{"id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819","name":"tf_tests_app_basic","description":"","created_at":"2022-06-27T15:39:29.118636Z","updated_at":"2022-06-27T15:39:29.118636Z","organization_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"nb_api_keys":1}'
    headers:
      Content-Length:
      - "265"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 910fcb88-bc95-4d62-a4f8-4cd7d98f5a90
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: GET
  response:
    body: '{"access_key":"SCWYH33MVHYQYSSSFTNB","secret_key":null,"description":"a
      description","created_at":"2022-06-27T15:39:29.306136Z","updated_at":"2022-06-27T15:39:29.306136Z","expired_at":null,"default_project_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"creation_ip":"","application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819"}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:29 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 194dc5ea-b8b2-4aa8-9df1-a7f2aa3198df
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/applications/17b53ffe-b7cc-4d87-ae6f-d7a68f71e819
    method: GET
  response:
    body: '{"id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819","name":"tf_tests_app_basic","description":"","created_at":"2022-06-27T15:39:29.118636Z","updated_at":"2022-06-27T15:39:29.118636Z","organization_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"nb_api_keys":1}'
    headers:
      Content-Length:
      - "265"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 898077f1-b96c-41fc-9c0f-6a9bbfefc8fd
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: GET
  response:
    body: '{"access_key":"SCWYH33MVHYQYSSSFTNB","secret_key":null,"description":"a
      description","created_at":"2022-06-27T15:39:29.306136Z","updated_at":"2022-06-27T15:39:29.306136Z","expired_at":null,"default_project_id":"012eb4a7-a183-4fed-89fa-6ae2013bcf60","editable":true,"creation_ip":"","application_id":"17b53ffe-b7cc-4d87-ae6f-d7a68f71e819"}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a6340fce-c944-4da7-ab1f-f4d7046a7ba5
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"default_project_id":null,"description":"another description"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: PATCH
  response:
    body: '{"details":[{"action":"write","resource":"api_key"},{"action":"write","resource":"self_api_key"}],"message":"insufficient
      permissions","type":"permissions_denied"}'
    headers:
      Content-Length:
      - "163"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - c361f901-7f62-498a-b59b-e8e71b151f12
    status: 403 Forbidden
    code: 403
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b3384ba1-3fb0-4dde-8b58-7df4ab199a2b
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/applications/17b53ffe-b7cc-4d87-ae6f-d7a68f71e819
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 32e28771-c7fc-49c5-a2fc-0da4af03af85
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.3; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://agw.stg.fr-par-2.internal.scaleway.com/iam/v1alpha1/api-keys/SCWYH33MVHYQYSSSFTNB
    method: GET
  response:
    body: '{"message":"resource is not found","resource":"access_key","resource_id":"SCWYH33MVHYQYSSSFTNB","type":"not_found"}'
    headers:
      Content-Length:
      - "115"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 27 Jun 2022 15:39:30 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b91ab363-4cea-48fb-9884-dbd999776858
    status: 404 Not Found
    code: 404
    duration: ""
