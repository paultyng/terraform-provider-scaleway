---
version: 1
interactions:
- request:
    body: '{"name":"test-acc-scaleway-project-7772570306017654305","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","description":null}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v2/projects
    method: POST
  response:
    body: '{"created_at":"2023-01-25T12:33:07.092961Z","description":"","id":"46e52946-c428-4ebc-990e-3514e3ab3cf3","name":"test-acc-scaleway-project-7772570306017654305","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-25T12:33:07.092961Z"}'
    headers:
      Content-Length:
      - "260"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:07 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - bd436ec3-2d25-4849-952f-3bcf7f5812a8
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-app-2779462102909918291","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications
    method: POST
  response:
    body: '{"created_at":"2023-01-25T12:33:07.724537Z","description":"","editable":true,"id":"74d0fdf0-b3d0-47b4-83cb-19a148013812","name":"test-acc-scaleway-iam-app-2779462102909918291","nb_api_keys":0,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-25T12:33:07.724537Z"}'
    headers:
      Content-Length:
      - "292"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:07 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 7d611c92-1679-421b-9392-95ce1732f0c3
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-policy-1991626015108477635","description":"","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","rules":[{"permission_set_names":["ObjectStorageReadOnly","ObjectStorageObjectsRead","ObjectStorageBucketsRead"],"project_ids":["46e52946-c428-4ebc-990e-3514e3ab3cf3"]}],"application_id":"74d0fdf0-b3d0-47b4-83cb-19a148013812"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"application_id":"74d0fdf0-b3d0-47b4-83cb-19a148013812","created_at":"2023-01-25T12:33:07.791288Z","description":"","editable":true,"id":"fa3e310f-8658-4c35-8c39-22ccea9661c4","name":"test-acc-scaleway-iam-policy-1991626015108477635","nb_permission_sets":0,"nb_rules":0,"nb_scopes":0,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-25T12:33:07.791288Z"}'
    headers:
      Content-Length:
      - "385"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:07 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 903718da-b2ca-459d-993a-c6c6cc395c60
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"application_id":"74d0fdf0-b3d0-47b4-83cb-19a148013812","expires_at":null,"default_project_id":"46e52946-c428-4ebc-990e-3514e3ab3cf3","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys
    method: POST
  response:
    body: '{"access_key":"SCW013KWRS22F50THBPG","application_id":"74d0fdf0-b3d0-47b4-83cb-19a148013812","created_at":"2023-01-25T12:33:07.970937Z","creation_ip":"51.159.73.9","default_project_id":"46e52946-c428-4ebc-990e-3514e3ab3cf3","description":"","editable":true,"expires_at":null,"secret_key":"00000000-0000-0000-0000-000000000000","updated_at":"2023-01-25T12:33:07.970937Z"}'
    headers:
      Content-Length:
      - "370"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:07 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 502a28e4-6f51-45b3-96b2-ebae4b80e556
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>fr-par</LocationConstraint></CreateBucketConfiguration>
    form: {}
    headers:
      Content-Length:
      - "150"
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Bucket-Object-Lock-Enabled:
      - "false"
      X-Amz-Content-Sha256:
      - 2cb57fad7b7168921a4c94426cfcb9ee2953f126430595df844e22d50f029060
      X-Amz-Date:
      - 20230125T123309Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 25 Jan 2023 12:33:12 GMT
      Location:
      - /test-acc-scaleway-object-bucket-2868840517530445363
      X-Amz-Id-2:
      - tx96c2cbbad58045288caa0-0063d12185
      X-Amz-Request-Id:
      - tx96c2cbbad58045288caa0-0063d12185
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Content-Md5:
      - 1B2M2Y8AsgTpgAmY7PhCfg==
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123312Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?acl=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - tx0748976c6923466ab5d11-0063d12188
      X-Amz-Request-Id:
      - tx0748976c6923466ab5d11-0063d12188
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?acl=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <AccessControlPolicy xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Owner><ID>105bdce1-64c0-48ab-899d-868455867ecf:105bdce1-64c0-48ab-899d-868455867ecf</ID><DisplayName>105bdce1-64c0-48ab-899d-868455867ecf:105bdce1-64c0-48ab-899d-868455867ecf</DisplayName></Owner><AccessControlList><Grant><Grantee xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CanonicalUser"><ID>105bdce1-64c0-48ab-899d-868455867ecf:105bdce1-64c0-48ab-899d-868455867ecf</ID><DisplayName>105bdce1-64c0-48ab-899d-868455867ecf:105bdce1-64c0-48ab-899d-868455867ecf</DisplayName></Grantee><Permission>FULL_CONTROL</Permission></Grant></AccessControlList></AccessControlPolicy>
    headers:
      Content-Length:
      - "698"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - tx44240de11f2541ed88f2a-0063d1218a
      X-Amz-Request-Id:
      - tx44240de11f2541ed88f2a-0063d1218a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?object-lock=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>ObjectLockConfigurationNotFoundError</Code><Message>Object Lock configuration does not exist for this bucket</Message><RequestId>tx1247ebf22b76491b9a3c2-0063d1218a</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - tx1247ebf22b76491b9a3c2-0063d1218a
      X-Amz-Request-Id:
      - tx1247ebf22b76491b9a3c2-0063d1218a
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <ListBucketResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Name>test-acc-scaleway-object-bucket-2868840517530445363</Name><Prefix/><Delimiter/><MaxKeys>1000</MaxKeys><IsTruncated>false</IsTruncated><Marker/></ListBucketResult>
    headers:
      Content-Length:
      - "273"
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - txf879b41194d34fe9acf42-0063d1218a
      X-Amz-Request-Id:
      - txf879b41194d34fe9acf42-0063d1218a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?tagging=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchTagSet</Code><Message>There is no tag set associated with the bucket or object.</Message><RequestId>tx6dc3858fd88a411cb8f27-0063d1218a</RequestId><Headers/></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - tx6dc3858fd88a411cb8f27-0063d1218a
      X-Amz-Request-Id:
      - tx6dc3858fd88a411cb8f27-0063d1218a
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?cors=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchCORSConfiguration</Code><Message>The CORS configuration does not exist</Message><RequestId>tx32fa001c59894998bba3b-0063d1218a</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:14 GMT
      X-Amz-Id-2:
      - tx32fa001c59894998bba3b-0063d1218a
      X-Amz-Request-Id:
      - tx32fa001c59894998bba3b-0063d1218a
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123314Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?versioning=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <VersioningConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"/>
    headers:
      Content-Length:
      - "113"
      Content-Type:
      - text/plain
      Date:
      - Wed, 25 Jan 2023 12:33:15 GMT
      X-Amz-Id-2:
      - tx5422f0d93dff4ebf983ff-0063d1218a
      X-Amz-Request-Id:
      - tx5422f0d93dff4ebf983ff-0063d1218a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123315Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/?lifecycle=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchLifecycleConfiguration</Code><Message>The lifecycle configuration does not exist.</Message><RequestId>tx7505c50d3e054ec4bece5-0063d1218b</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:15 GMT
      X-Amz-Id-2:
      - tx7505c50d3e054ec4bece5-0063d1218b
      X-Amz-Request-Id:
      - tx7505c50d3e054ec4bece5-0063d1218b
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123315Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/
    method: HEAD
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - application/xml
      Date:
      - Wed, 25 Jan 2023 12:33:15 GMT
      X-Amz-Id-2:
      - txecd61bfb6c664426830ba-0063d1218b
      X-Amz-Request-Id:
      - txecd61bfb6c664426830ba-0063d1218b
    status: 403 Forbidden
    code: 403
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230125T123315Z
    url: https://test-acc-scaleway-object-bucket-2868840517530445363.s3.fr-par.scw.cloud/
    method: DELETE
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Wed, 25 Jan 2023 12:33:15 GMT
      X-Amz-Id-2:
      - txceb63146eba54668895f8-0063d1218b
      X-Amz-Request-Id:
      - txceb63146eba54668895f8-0063d1218b
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys/SCW013KWRS22F50THBPG
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:15 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 0e80f309-45c0-4ba6-a173-5be27fca18dd
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/fa3e310f-8658-4c35-8c39-22ccea9661c4
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:16 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4a722a21-5c30-406d-b28f-6473812a14e4
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications/74d0fdf0-b3d0-47b4-83cb-19a148013812
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:16 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4f3cf533-85cf-465b-bdb9-dcf493c081c2
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v2/projects/46e52946-c428-4ebc-990e-3514e3ab3cf3
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:16 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 7c22ec9f-9dd0-45e2-b205-84223c8f56c6
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys/SCW013KWRS22F50THBPG
    method: DELETE
  response:
    body: '{"message":"resource is not found","resource":"access_key","resource_id":"SCW013KWRS22F50THBPG","type":"not_found"}'
    headers:
      Content-Length:
      - "115"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 25 Jan 2023 12:33:16 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 80b5c35f-028a-4efb-9932-7bd43aad311a
    status: 404 Not Found
    code: 404
    duration: ""
