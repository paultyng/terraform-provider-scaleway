---
version: 1
interactions:
- request:
    body: '{"name":"test-acc-scaleway-project-4171006723088401247","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","description":null}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v2/projects
    method: POST
  response:
    body: '{"created_at":"2023-01-19T15:05:37.203592Z","description":"","id":"e78910ad-9824-4d71-b43b-e174a91de5f8","name":"test-acc-scaleway-project-4171006723088401247","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-19T15:05:37.203592Z"}'
    headers:
      Content-Length:
      - "265"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:37 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 32616c2b-2a7c-40ca-a8dd-6187f7216b94
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-app-5358047820768672973","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications
    method: POST
  response:
    body: '{"created_at":"2023-01-19T15:05:37.761987Z","description":"","editable":true,"id":"edcae4cb-6478-49d4-b11d-78c086e6e697","name":"test-acc-scaleway-iam-app-5358047820768672973","nb_api_keys":0,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-19T15:05:37.761987Z"}'
    headers:
      Content-Length:
      - "292"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:37 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 0a7154c9-e109-48e3-aed1-d1cc1d922706
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"name":"test-acc-scaleway-iam-policy-7208193412598786589","description":"","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","rules":[{"permission_set_names":["ObjectStorageReadOnly","ObjectStorageObjectsRead","ObjectStorageBucketsRead"],"project_ids":["e78910ad-9824-4d71-b43b-e174a91de5f8"]}],"application_id":"edcae4cb-6478-49d4-b11d-78c086e6e697"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"application_id":"edcae4cb-6478-49d4-b11d-78c086e6e697","created_at":"2023-01-19T15:05:37.843720Z","description":"","editable":true,"id":"41f6e061-0fd9-4d7b-a224-9e8d434191a2","name":"test-acc-scaleway-iam-policy-7208193412598786589","nb_permission_sets":0,"nb_rules":0,"nb_scopes":0,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","updated_at":"2023-01-19T15:05:37.843720Z"}'
    headers:
      Content-Length:
      - "395"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:37 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - e626cdac-7207-4a4f-b7a1-bc5431f61ad4
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"application_id":"edcae4cb-6478-49d4-b11d-78c086e6e697","expires_at":null,"default_project_id":"e78910ad-9824-4d71-b43b-e174a91de5f8","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys
    method: POST
  response:
    body: '{"access_key":"SCW8PXV4CJFDFPQCAYYA","application_id":"edcae4cb-6478-49d4-b11d-78c086e6e697","created_at":"2023-01-19T15:05:38.248881Z","creation_ip":"51.159.73.9","default_project_id":"e78910ad-9824-4d71-b43b-e174a91de5f8","description":"","editable":true,"expires_at":null,"secret_key":"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated_at":"2023-01-19T15:05:38.248881Z"}'
    headers:
      Content-Length:
      - "379"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:38 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ad8d49bb-7a8b-49f0-a338-a3fdf9b1e54b
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>fr-par</LocationConstraint></CreateBucketConfiguration>
    form: {}
    headers:
      Content-Length:
      - "150"
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Bucket-Object-Lock-Enabled:
      - "false"
      X-Amz-Content-Sha256:
      - 2cb57fad7b7168921a4c94426cfcb9ee2953f126430595df844e22d50f029060
      X-Amz-Date:
      - 20230119T150539Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      Location:
      - /test-acc-scaleway-object-bucket-6772513380038355391
      X-Amz-Id-2:
      - txa59c39e4211649fe90e3d-0063c95c43
      X-Amz-Request-Id:
      - txa59c39e4211649fe90e3d-0063c95c43
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      Content-Md5:
      - 1B2M2Y8AsgTpgAmY7PhCfg==
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Acl:
      - private
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?acl=
    method: PUT
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      X-Amz-Id-2:
      - tx6fad4d92dfce46d894b6b-0063c95c44
      X-Amz-Request-Id:
      - tx6fad4d92dfce46d894b6b-0063c95c44
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?object-lock=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>ObjectLockConfigurationNotFoundError</Code><Message>Object Lock configuration does not exist for this bucket</Message><RequestId>txa503a5afe9e44263980a3-0063c95c44</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      X-Amz-Id-2:
      - txa503a5afe9e44263980a3-0063c95c44
      X-Amz-Request-Id:
      - txa503a5afe9e44263980a3-0063c95c44
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <ListBucketResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><Name>test-acc-scaleway-object-bucket-6772513380038355391</Name><Prefix/><Delimiter/><MaxKeys>1000</MaxKeys><IsTruncated>false</IsTruncated><Marker/></ListBucketResult>
    headers:
      Content-Length:
      - "273"
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      X-Amz-Id-2:
      - tx3fcf6ad623e04c5dac4bf-0063c95c44
      X-Amz-Request-Id:
      - tx3fcf6ad623e04c5dac4bf-0063c95c44
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?tagging=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchTagSet</Code><Message>There is no tag set associated with the bucket or object.</Message><RequestId>tx64b6abafff3545fe8766c-0063c95c44</RequestId><Headers/></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      X-Amz-Id-2:
      - tx64b6abafff3545fe8766c-0063c95c44
      X-Amz-Request-Id:
      - tx64b6abafff3545fe8766c-0063c95c44
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?cors=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchCORSConfiguration</Code><Message>The CORS configuration does not exist</Message><RequestId>txe6d284c2301548f494720-0063c95c44</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:40 GMT
      X-Amz-Id-2:
      - txe6d284c2301548f494720-0063c95c44
      X-Amz-Request-Id:
      - txe6d284c2301548f494720-0063c95c44
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150540Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?versioning=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <VersioningConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"/>
    headers:
      Content-Length:
      - "113"
      Content-Type:
      - text/plain
      Date:
      - Thu, 19 Jan 2023 15:05:41 GMT
      X-Amz-Id-2:
      - txba3331a8299741caa96cd-0063c95c44
      X-Amz-Request-Id:
      - txba3331a8299741caa96cd-0063c95c44
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150541Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/?lifecycle=
    method: GET
  response:
    body: |-
      <?xml version='1.0' encoding='UTF-8'?>
      <Error><Code>NoSuchLifecycleConfiguration</Code><Message>The lifecycle configuration does not exist.</Message><RequestId>tx28b51e23cd804391bd0b2-0063c95c45</RequestId></Error>
    headers:
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:41 GMT
      X-Amz-Id-2:
      - tx28b51e23cd804391bd0b2-0063c95c45
      X-Amz-Request-Id:
      - tx28b51e23cd804391bd0b2-0063c95c45
    status: 404 Not Found
    code: 404
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150541Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/
    method: HEAD
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - application/xml
      Date:
      - Thu, 19 Jan 2023 15:05:41 GMT
      X-Amz-Id-2:
      - tx126dc336945149f5a22c8-0063c95c45
      X-Amz-Request-Id:
      - tx126dc336945149f5a22c8-0063c95c45
    status: 403 Forbidden
    code: 403
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - aws-sdk-go/1.44.171 (go1.19.5; darwin; amd64)
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      X-Amz-Date:
      - 20230119T150541Z
    url: https://test-acc-scaleway-object-bucket-6772513380038355391.s3.fr-par.scw.cloud/
    method: DELETE
  response:
    body: ""
    headers:
      Content-Length:
      - "0"
      Content-Type:
      - text/html; charset=UTF-8
      Date:
      - Thu, 19 Jan 2023 15:05:42 GMT
      X-Amz-Id-2:
      - tx8a6cf20afa00422e9e4a7-0063c95c45
      X-Amz-Request-Id:
      - tx8a6cf20afa00422e9e4a7-0063c95c45
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/api-keys/SCW8PXV4CJFDFPQCAYYA
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:42 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 101cd36c-feff-412c-8d35-bdcbf899b6a0
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/41f6e061-0fd9-4d7b-a224-9e8d434191a2
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:42 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 1f2ab416-7fbe-4070-931e-16af7c370ed2
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/applications/edcae4cb-6478-49d4-b11d-78c086e6e697
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:42 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b6456ff8-c056-451e-87cf-1b5565710d6a
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.19.5; darwin; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/account/v2/projects/e78910ad-9824-4d71-b43b-e174a91de5f8
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Jan 2023 15:05:43 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - e7e69019-204f-4ae5-83f8-f7df867fbfad
    status: 204 No Content
    code: 204
    duration: ""
