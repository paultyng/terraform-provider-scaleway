---
version: 1
interactions:
- request:
    body: '{"name":"tf_tests_policy_noupdate","description":"a description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","rules":[{"permission_set_names":["AllProductsFullAccess"],"project_ids":null,"organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253"}],"no_principal":true}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b80371af-9fd3-4cdd-a0b6-7dc37f7c76ba
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 97d84331-0c8b-4d59-9fb1-42d293b956d9
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"rules":[{"id":"66c63426-e48c-465a-ae5a-5b4009a8c08b","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 1cdf4a7b-3043-4f4f-ad59-cf20634b476b
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - d86b2915-e883-4b1c-b640-6498175614e2
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 26ac5fce-fa1e-467b-bfd7-5d43fc856d3b
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"rules":[{"id":"66c63426-e48c-465a-ae5a-5b4009a8c08b","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - d4e4990f-837a-46be-b1c5-4d5efa50dfa6
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 6f78c37e-8a71-41a6-8a26-7e5e32520722
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"rules":[{"id":"66c63426-e48c-465a-ae5a-5b4009a8c08b","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 42d67df0-3379-486b-801f-35254888d046
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 01ce2455-0f01-4a11-8874-91148efe649a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","name":"tf_tests_policy_noupdate","description":"a
      description","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253","created_at":"2022-07-06T13:33:46.509555Z","updated_at":"2022-07-06T13:33:46.509555Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "338"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 04340c91-b535-4ce9-bf88-1d2c48e19649
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"rules":[{"id":"66c63426-e48c-465a-ae5a-5b4009a8c08b","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"458f88ce-0f70-48b5-834d-5304b8b76253"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 7d9ca5fd-1392-4c8c-a15e-ae56ffa1f0e9
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 3ddaef5d-46d4-408b-a23c-162324684184
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/424c5b81-560f-4e1e-b7b9-4006c7a9d0e8
    method: GET
  response:
    body: '{"message":"resource is not found","resource":"policy","resource_id":"424c5b81-560f-4e1e-b7b9-4006c7a9d0e8","type":"not_found"}'
    headers:
      Content-Length:
      - "127"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 06 Jul 2022 13:33:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 5ed589cb-a312-4394-9a5a-a9326880c208
    status: 404 Not Found
    code: 404
    duration: ""
