---
version: 1
interactions:
- request:
    body: '{"name":"tf_tests_policy_basic","description":"a description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","rules":[{"permission_set_names":["ContainerRegistryReadOnly"],"project_ids":null,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"},{"permission_set_names":["AllProductsFullAccess"],"project_ids":null,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"no_principal":true}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":2,"nb_scopes":2,"nb_permission_sets":2,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:43 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 25da6e13-59f3-4756-a9dc-71d0481f0907
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":2,"nb_scopes":1,"nb_permission_sets":2,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:44 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - d6fb051b-aca4-49e8-861f-a2b5dc0da4ae
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"rules":[{"id":"96319318-7168-4b8a-8430-348895a4152d","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"},{"id":"ab65816d-9065-47c7-a3cd-10be96c43c06","permission_set_names":["ContainerRegistryReadOnly"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":2}'
    headers:
      Content-Length:
      - "423"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:44 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 40938e5b-a79a-49a5-bac8-68418fc9ef2e
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":2,"nb_scopes":1,"nb_permission_sets":2,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:45 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 6e6115b2-2392-4f6a-b77f-7152113d2e6d
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":2,"nb_scopes":1,"nb_permission_sets":2,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:45 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - beecea2d-2011-4cab-b961-ea6a78c1e4f0
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"rules":[{"id":"96319318-7168-4b8a-8430-348895a4152d","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"},{"id":"ab65816d-9065-47c7-a3cd-10be96c43c06","permission_set_names":["ContainerRegistryReadOnly"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":2}'
    headers:
      Content-Length:
      - "423"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - f5d4d2bf-7892-4884-a7b2-9724b05553ff
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":2,"nb_scopes":1,"nb_permission_sets":2,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 1ae7bad8-cbd9-4813-ad20-b683a56c8f14
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"rules":[{"id":"96319318-7168-4b8a-8430-348895a4152d","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"},{"id":"ab65816d-9065-47c7-a3cd-10be96c43c06","permission_set_names":["ContainerRegistryReadOnly"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":2}'
    headers:
      Content-Length:
      - "423"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ca651cee-5bb4-4bcb-b771-82096a122e87
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"policy_id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","rules":[{"permission_set_names":["AllProductsFullAccess"],"project_ids":null,"organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}]}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules
    method: PUT
  response:
    body: '{"rules":[{"id":"10836131-ab1f-4c03-aa33-155210125f77","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}]}'
    headers:
      Content-Length:
      - "207"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:46 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 2894cb0a-b066-4c7a-b1fb-54782b6454ac
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - fb6837a7-1384-4bf9-820b-baab84a73237
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"rules":[{"id":"10836131-ab1f-4c03-aa33-155210125f77","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 442f56f5-4f05-4aff-a267-5b37096bf88d
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4d65426e-522b-41d3-8940-ff26dccde2e9
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","name":"tf_tests_policy_basic","description":"a
      description","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf","created_at":"2022-07-08T12:30:43.556720Z","updated_at":"2022-07-08T12:30:43.556720Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"no_principal":true}'
    headers:
      Content-Length:
      - "335"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - f35c03e5-d9d3-4042-b058-c0d4421de84a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/rules?policy_id=75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"rules":[{"id":"10836131-ab1f-4c03-aa33-155210125f77","permission_set_names":["AllProductsFullAccess"],"permission_sets_scope_type":"organization","organization_id":"105bdce1-64c0-48ab-899d-868455867ecf"}],"total_count":1}'
    headers:
      Content-Length:
      - "223"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:47 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - bc11d865-8076-4747-add8-c4f22261ebe7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - dc71b606-7344-4e4b-8cd5-d5180b74d9b7
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.18.2; linux; amd64) terraform-provider/develop
        terraform/terraform-tests
    url: https://api.scaleway.com/iam/v1alpha1/policies/75f60745-e87b-45d7-b3bd-5a1be93dd314
    method: GET
  response:
    body: '{"message":"resource is not found","resource":"policy","resource_id":"75f60745-e87b-45d7-b3bd-5a1be93dd314","type":"not_found"}'
    headers:
      Content-Length:
      - "127"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Fri, 08 Jul 2022 12:30:48 GMT
      Server:
      - Scaleway API-Gateway
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a8355804-f17a-47cd-a9b3-66a55c662314
    status: 404 Not Found
    code: 404
    duration: ""
